@model ProyectoTransportesAndes.ViewModels.ViewModelLiquidacion
@{
    ViewData["Title"] = "LiquidacionViajesChofer";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <form asp-action="Index" asp-controller="Viaje">
        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
        <div class="form-inline">
            <div class="form-group">
                @Html.DropDownListFor(m => Model.IdChofer, Model.ListaChoferes, new { @class = "form-control" })
            </div>
            <div class="form-group">
                <input type="submit" value="Buscar" class="form-control btn-info" />
            </div>
        </div>
    </form>
</div>
<div class="row">
    <div class="panel panel-info" id="documento">
        @if (Model.Liquidacion.Chofer != null)
        {
            <div class="panel-heading">Liquidacion chofer @Model.Liquidacion.Chofer.Leyenda</div>

        }
        else
        {
            <div class="panel-heading">Liquidacion chofer</div>
        }
            <div class="panel-body">
                <form asp-action="ConfirmacionLiquidacion" asp-controller="Viaje">
                    <table class="table table-responsive">
                        <thead>
                            <tr>
                                <th scope="col">Fecha</th>
                                <th scope="col">Hora inicio</th>
                                <th scope="col">Hora fin</th>
                                <th scope="col">Cliente</th>
                                <th scope="col">Costo viaje</th>
                                <th scope="col">Liquidar</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.Liquidacion.Viajes)
                            {
                                <tr>
                                    <td><input asp-for="@item.Fecha" value="@item.Fecha" /></td>
                                    <td><input asp-for="@item.HoraInicio" value="@item.HoraInicio" /></td>
                                    <td><input asp-for="@item.Cliente" value="@item.Cliente" /></td>
                                    <td><input asp-for="@item.CostoFinal" value="@item.CostoFinal" /></td>
                                    <td><input asp-for="@item.Liquidado" /></td>
                                </tr>
                            }
                            <tr></tr>
                            <tr></tr>
                            <tr><td></td><td></td><td></td><td></td><td>@Model.Liquidacion.TotalViajes</td></tr>
                            <tr><td></td><td></td><td></td><td></td><td>@Model.Liquidacion.TotalComision</td></tr>
                            <tr><td></td><td></td><td></td><td></td><td>@Model.Liquidacion.Liquidacion</td></tr>
                        </tbody>
                    </table>
                    <input asp-for="Liquidacion.Chofer" type="hidden" />
                    <input asp-for="Documento" type="hidden" id="documentoHtml" />
                    <input asp-for="IdLiquidacionChofer" class="form-control hidden" />
                    <div class="form-group">
                        <input type="submit" value="Liquidar" name="liquidar" class="btn btn-danger btn-block" />
                    </div>
                    <div class="form-group">
                        <input type="submit" value="Confirmar" name="confirmar" class="btn btn-success btn-block" id="btnConfirmar" />
                    </div>
                    <div class="form-group">
                        <input type="submit" value="Cancelar" name="cancelar" class="btn btn-danger btn-block" />
                    </div>
                </form>
            </div>
    </div>
</div>
<script type="text/javascript">
        $(function () {
            $("#btnConfirmar").click(function () {
                $("input[name='documentoHtml']").val($("#documento").html());
            });
        });
</script>

